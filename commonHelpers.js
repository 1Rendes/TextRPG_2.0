(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))L(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const v of u.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&L(v)}).observe(document,{childList:!0,subtree:!0});function G(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerPolicy&&(u.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?u.credentials="include":n.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function L(n){if(n.ep)return;n.ep=!0;const u=G(n);fetch(n.href,u)}})();let b=0,s=100,r=50,d=0,c,y,x=["Палка"];const q=document.querySelector("#button1"),S=document.querySelector("#button2"),H=document.querySelector("#button3"),t=document.querySelector("#text"),$=document.querySelector("#xpText"),M=document.querySelector("#healthText"),g=document.querySelector("#goldText"),C=document.querySelector("#monsterStats"),B=document.querySelector("#monsterName"),O=document.querySelector("#monsterHealth"),m=document.querySelector("#history"),w=[{name:"Палка",power:5},{name:"Кинжал",power:30},{name:"Дубина",power:50},{name:"Меч",power:100}],T=[{name:"Слизь",level:2,health:15},{name:"Клыкастый монстр",level:8,health:60},{name:"Дракон",level:20,health:300}],a=[{name:"Городская площадь","button text":["Посетить лавку","Отправиться в пещеру","Схватка с Драконом"],"button functions":[N,P,W],text:'Вы на городской площади и видите вывеску "Лавка". Вдали среди холмов виден вход в пещеру.'},{name:"Лавка","button text":["Купить 10 здоровья(10 золотых)","Купить оружие(30 золотых)","Вернуться на площадь"],"button functions":[K,V,F],text:"Вы находитесь в лавке."},{name:"Пещера","button text":["Сразиться со слизью","Сразиться с клыкастым монстром","Вернуться на городскую площадь"],"button functions":[z,J,h],text:"Вы вошли в пещеру. Вы видите некоторых монстров. Они вас не заметили..."},{name:"Битва","button text":["Атака","Увернуться","Сбежать"],"button functions":[Q,X,h],text:"Вы сражаетесь с монстром.",color:"yellow"},{name:"Смерть монстра","button text":["Выйти из пещеры","Продолжить","Осмотреться"],"button functions":[h,D,I],text:'Монстр кричит "Ааххрг!" и умирает. Вы Получили опыт и немного золота.',color:"lime"},{name:"Проигрыш","button text":["ПОВТОР?","ПОВТОР?","ПОВТОР?"],"button functions":[p,p,p],text:"Вы умерли. &#x2620;",color:"red"},{name:"Победа","button text":["ПОВТОР?","ПОВТОР?","ПОВТОР?"],"button functions":[p,p,p],text:"Вы одолели Дракона! ВЫ ПОБЕДИЛИ! &#x1F389;",color:"lime"},{name:"Пасхалка","button text":["2","8","Выйти из пещеры."],"button functions":[ee,te,h],text:"Вы нашли секретный ход и пробрались в него. Здесь стоит сундук но он закрыт. Нужно отгадать число и вы сможете открыть его и забрать золото. На сундуке стоит ловушка, будьте аккуратны."},{name:"Секретный ход в пещере","button text":["Зажечь факел и продвигаться дальше","Выйти из пещеры","Выйти из пещеры"],"button functions":[_,h,h],text:"Из этого хода несёт затхлым воздухом..."}];q.onclick=N;S.onclick=P;H.onclick=W;function l(e,o){m.innerHTML+=`<span class='game-message' style='color:${o}'>${e}</span>`,m.scrollTop=m.scrollHeight}function i(e,o){m.innerHTML+=`<span class='player-message' style='color:${o}'>${e}</span>`,m.scrollTop=m.scrollHeight}function f(e){C.style.display="none",q.innerText=e["button text"][0],S.innerText=e["button text"][1],H.innerText=e["button text"][2],q.onclick=e["button functions"][0],S.onclick=e["button functions"][1],H.onclick=e["button functions"][2],t.innerHTML=e.text,l(e.text,e.color)}function F(){i("Вы выходите из оружейной лавки..."),f(a[0])}function h(){i("Вы выбираетесь из пещеры на свежий воздух..."),f(a[0])}function N(){i("Вы направляетесь в местную оружейную лавку..."),f(a[1])}function P(){i("Вы направились в пещеру, из которой начинает нести зловонием и слышно странные звуки..."),f(a[2])}function D(){i("Вы остались в пещере и видите некоторых монстров. Они вас не заметили..."),f(a[2])}function I(){i("В пещере вы обнаружили дополнительное ответвление, но там очень темно..."),f(a[8])}function K(){r>=10?(r-=10,s+=10,g.innerText=r,M.innerText=s,i("Вы потратили <b>10</b> золота на здоровье")):(t.innerText="У Вас нет достаточно золота чтобы купить здоровье",l(t.innerText,"red"))}function V(){if(d<w.length-1)if(r>=30){i("Вы потратили <b>30</b> золота на новое оружие"),r-=30,d++,g.innerText=r;let e=w[d].name;t.innerText="Теперь у Вас "+e+".",x.push(e),t.innerText+=" В Вашем инвентаре есть: "+x,l(t.innerText,"lime")}else t.innerText="У Вас нет достаточно золота чтобы купить оружие.",l(t.innerText,"red");else t.innerText="У Вас уже есть самое мощное оружие!",l(t.innerText,"yellow"),S.innerText="Продать оружие за 15 золотых",S.onclick=j}function j(){if(x.length>1){r+=15,g.innerText=r;let e=x.shift();i(`Вы продали <b>${e}</b> за <b>15</b> золота`),t.innerText="Вы продали "+e+".",t.innerText+=" В Вашем инвентаре есть: "+x,l(t.innerText)}else t.innerText="Не продавайте Ваше единственное оружие!",l(t.innerText,"red")}function z(){c=0,k()}function J(){c=1,k()}function W(){c=2,k()}function k(){i(`Вы подошли ближе и на вас напал: ${T[c].name}!`),f(a[3]),y=T[c].health,C.style.display="block",B.innerText=T[c].name,O.innerText=y,m.scrollTop=m.scrollHeight}function Q(){t.innerText=""+T[c].name+" Атакует.",t.innerText+=" Вы атаковали монстра используя "+w[d].name+".",s-=R(T[c].level),i(t.innerText,"yellow"),U()?y-=w[d].power+Math.floor(Math.random()*b)+1:(t.innerText+=" Вы промахнулись.",l(t.innerText,"red")),M.innerText=s,O.innerText=y,s<=0?E():y<=0&&(c===2?Z():Y()),Math.random()<=.1&&x.length!==1&&(t.innerText+=" Ваш "+x.pop()+" сломался.",l(t.innerText,"red"),d--)}function R(e){const o=e*5-Math.floor(Math.random()*b);return o>0?o:0}function U(){return Math.random()>.2||s<20}function X(){i("Вы сделали манёвр, чтобы увернуться."),t.innerText="Вы увернулись от атаки: "+T[c].name,l(t.innerText,"lime")}function Y(){r+=Math.floor(T[c].level*6.7),b+=T[c].level,g.innerText=r,$.innerText=b,f(a[4])}function E(){f(a[5])}function Z(){f(a[6])}function p(){b=0,s=100,r=50,d=0,x=["Палка"],g.innerText=r,M.innerText=s,$.innerText=b,F()}function _(){i("Вы зажгли факел и пройдя немного дальше что-то обнаружили..."),f(a[7])}function ee(){A(2)}function te(){A(8)}function A(e){const o=[];for(;o.length<10;)o.push(Math.floor(Math.random()*11));i(`Вы выбрали ${e} и пытаетесь открывать сундук...`),o.includes(e)?(l("Сундук открылся! Вы нашли 20 золотых!","lime"),r+=20,g.innerText=r):(l("Сработала ловушка и брызнул опасный яд! Вы потеряли 10 здоровья.","red"),s-=10,M.innerText=s,s<=0&&E())}
//# sourceMappingURL=commonHelpers.js.map
