{"version":3,"file":"commonHelpers.js","sources":["../src/script.js"],"sourcesContent":["let xp = 0;\nlet health = 100;\nlet gold = 50;\nlet currentWeapon = 0;\nlet fighting;\nlet monsterHealth;\nlet inventory = ['Палка'];\n\nconst button1 = document.querySelector('#button1');\nconst button2 = document.querySelector('#button2');\nconst button3 = document.querySelector('#button3');\nconst text = document.querySelector('#text');\nconst xpText = document.querySelector('#xpText');\nconst healthText = document.querySelector('#healthText');\nconst goldText = document.querySelector('#goldText');\nconst monsterStats = document.querySelector('#monsterStats');\nconst monsterName = document.querySelector('#monsterName');\nconst monsterHealthText = document.querySelector('#monsterHealth');\nconst history = document.querySelector('#history');\nconst weapons = [\n  { name: 'Палка', power: 5 },\n  { name: 'Кинжал', power: 30 },\n  { name: 'Дубина', power: 50 },\n  { name: 'Меч', power: 100 },\n];\nconst monsters = [\n  {\n    name: 'Слизь',\n    level: 2,\n    health: 15,\n  },\n  {\n    name: 'Клыкастый монстр',\n    level: 8,\n    health: 60,\n  },\n  {\n    name: 'Дракон',\n    level: 20,\n    health: 300,\n  },\n];\nconst locations = [\n  {\n    name: 'Городская площадь',\n    'button text': [\n      'Посетить лавку',\n      'Отправиться в пещеру',\n      'Схватка с Драконом',\n    ],\n    'button functions': [goStore, goCave, fightDragon],\n    text: 'Вы на городской площади. Вы видите вывеску \"Лавка\".',\n  },\n  {\n    name: 'Лавка',\n    'button text': [\n      'Купить 10 здоровья(10 золотых)',\n      'Купить оружие(30 золотых)',\n      'Вернуться на площадь',\n    ],\n    'button functions': [buyHealth, buyWeapon, goTown],\n    text: 'Вы находитесь в лавке.',\n  },\n  {\n    name: 'Пещера',\n    'button text': [\n      'Сразиться со слизью',\n      'Сразиться с клыкастым монстром',\n      'Вернуться на городскую площадь',\n    ],\n    'button functions': [fightSlime, fightBeast, goTown],\n    text: 'Вы вошли в пещеру. Вы видите монстров.',\n  },\n  {\n    name: 'Битва',\n    'button text': ['Атака', 'Увернуться', 'Сбежать'],\n    'button functions': [attack, dodge, goTown],\n    text: 'Вы сражаетесь с монстром.',\n    color: 'yellow',\n  },\n  {\n    name: 'Смерть монстра',\n    'button text': [\n      'Вернуться на городскую площадь',\n      'Вернуться на городскую площадь',\n      'Пасхалка',\n    ],\n    'button functions': [goTown, goTown, easterEgg],\n    text: 'Монстр кричит \"Ааххрг!\" и умирает. Вы Получили опыт и немного золота.',\n    color: 'lime',\n  },\n  {\n    name: 'Проигрыш',\n    'button text': ['ПОВТОР?', 'ПОВТОР?', 'ПОВТОР?'],\n    'button functions': [restart, restart, restart],\n    text: 'Вы умерли. &#x2620;',\n    color: 'red',\n  },\n  {\n    name: 'Победа',\n    'button text': ['ПОВТОР?', 'ПОВТОР?', 'ПОВТОР?'],\n    'button functions': [restart, restart, restart],\n    text: 'Вы одолели Дракона! ВЫ ПОБЕДИЛИ! &#x1F389;',\n    color: 'lime',\n  },\n  {\n    name: 'Пасхалка',\n    'button text': ['2', '8', 'Вернуться на городскую площадь.'],\n    'button functions': [pickTwo, pickEight, goTown],\n    text: 'Вы нашли секретную игру. Выберите номер выше. Десять чисел определяться случайно. Если среди них будет Ваше число, Вы выиграли!',\n    color: 'magenta',\n  },\n];\n\nbutton1.onclick = goStore;\nbutton2.onclick = goCave;\nbutton3.onclick = fightDragon;\n\nfunction updateHistory(text, color) {\n  history.innerHTML += `<span class='game-message' style='color:${color}'>${text}</span>`;\n  history.scrollTop = history.scrollHeight;\n}\n\nfunction update(location) {\n  monsterStats.style.display = 'none';\n  button1.innerText = location['button text'][0];\n  button2.innerText = location['button text'][1];\n  button3.innerText = location['button text'][2];\n  button1.onclick = location['button functions'][0];\n  button2.onclick = location['button functions'][1];\n  button3.onclick = location['button functions'][2];\n  text.innerHTML = location.text;\n  updateHistory(location.text, location.color);\n}\n\nfunction goTown() {\n  update(locations[0]);\n}\n\nfunction goStore() {\n  update(locations[1]);\n}\n\nfunction goCave() {\n  update(locations[2]);\n}\n\nfunction buyHealth() {\n  if (gold >= 10) {\n    gold -= 10;\n    health += 10;\n    goldText.innerText = gold;\n    healthText.innerText = health;\n  } else {\n    text.innerText = 'У Вас нет достаточно золота чтобы купить здоровье';\n    updateHistory(text.innerText, 'red');\n  }\n}\n\nfunction buyWeapon() {\n  if (currentWeapon < weapons.length - 1) {\n    if (gold >= 30) {\n      gold -= 30;\n      currentWeapon++;\n      goldText.innerText = gold;\n      let newWeapon = weapons[currentWeapon].name;\n      text.innerText = 'Теперь у Вас ' + newWeapon + '.';\n      inventory.push(newWeapon);\n      text.innerText += ' В Вашем инвентаре есть: ' + inventory;\n      updateHistory(text.innerText, 'lime');\n    } else {\n      text.innerText = 'У Вас нет достаточно золота чтобы купить оружие.';\n      updateHistory(text.innerText, 'red');\n    }\n  } else {\n    text.innerText = 'У Вас уже есть самое мощное оружие!';\n    updateHistory(text.innerText, 'yellow');\n    button2.innerText = 'Продать оружие за 15 золотых';\n    button2.onclick = sellWeapon;\n  }\n}\n\nfunction sellWeapon() {\n  if (inventory.length > 1) {\n    gold += 15;\n    goldText.innerText = gold;\n    let currentWeapon = inventory.shift();\n    text.innerText = 'Вы продали ' + currentWeapon + '.';\n    text.innerText += ' В Вашем инвентаре есть: ' + inventory;\n    updateHistory(text.innerText);\n  } else {\n    text.innerText = 'Не продавайте Ваше единственное оружие!';\n    updateHistory(text.innerText, 'red');\n  }\n}\n\nfunction fightSlime() {\n  fighting = 0;\n  goFight();\n}\n\nfunction fightBeast() {\n  fighting = 1;\n  goFight();\n}\n\nfunction fightDragon() {\n  fighting = 2;\n  goFight();\n}\n\nfunction goFight() {\n  update(locations[3]);\n  monsterHealth = monsters[fighting].health;\n  monsterStats.style.display = 'block';\n  monsterName.innerText = monsters[fighting].name;\n  monsterHealthText.innerText = monsterHealth;\n}\n\nfunction attack() {\n  text.innerText = '' + monsters[fighting].name + ' Атакует.';\n  text.innerText +=\n    ' Вы атаковали монстра используя ' + weapons[currentWeapon].name + '.';\n  health -= getMonsterAttackValue(monsters[fighting].level);\n  updateHistory(text.innerText, 'yellow');\n  if (isMonsterHit()) {\n    monsterHealth -=\n      weapons[currentWeapon].power + Math.floor(Math.random() * xp) + 1;\n  } else {\n    text.innerText += ' Вы промахнулись.';\n    updateHistory(text.innerText, 'red');\n  }\n  healthText.innerText = health;\n  monsterHealthText.innerText = monsterHealth;\n  if (health <= 0) {\n    lose();\n  } else if (monsterHealth <= 0) {\n    if (fighting === 2) {\n      winGame();\n    } else {\n      defeatMonster();\n    }\n  }\n  if (Math.random() <= 0.1 && inventory.length !== 1) {\n    text.innerText += ' Ваш ' + inventory.pop() + ' сломался.';\n    updateHistory(text.innerText, 'red');\n    currentWeapon--;\n  }\n}\n\nfunction getMonsterAttackValue(level) {\n  const hit = level * 5 - Math.floor(Math.random() * xp);\n  return hit > 0 ? hit : 0;\n}\n\nfunction isMonsterHit() {\n  return Math.random() > 0.2 || health < 20;\n}\n\nfunction dodge() {\n  text.innerText = 'Вы увернулись от атаки: ' + monsters[fighting].name;\n  updateHistory(text.innerText, 'lime');\n}\n\nfunction defeatMonster() {\n  gold += Math.floor(monsters[fighting].level * 6.7);\n  xp += monsters[fighting].level;\n  goldText.innerText = gold;\n  xpText.innerText = xp;\n  update(locations[4]);\n}\n\nfunction lose() {\n  update(locations[5]);\n}\n\nfunction winGame() {\n  update(locations[6]);\n}\n\nfunction restart() {\n  xp = 0;\n  health = 100;\n  gold = 50;\n  currentWeapon = 0;\n  inventory = ['Палка'];\n  goldText.innerText = gold;\n  healthText.innerText = health;\n  xpText.innerText = xp;\n  goTown();\n}\n\nfunction easterEgg() {\n  update(locations[7]);\n}\n\nfunction pickTwo() {\n  pick(2);\n}\n\nfunction pickEight() {\n  pick(8);\n}\n\nfunction pick(guess) {\n  const numbers = [];\n  while (numbers.length < 10) {\n    numbers.push(Math.floor(Math.random() * 11));\n  }\n  text.innerText = 'Вы выбрали ' + guess + '. Вот случайные числа:\\n';\n  for (let i = 0; i < 10; i++) {\n    text.innerText += numbers[i] + '\\n';\n  }\n  updateHistory(text.innerText);\n  if (numbers.includes(guess)) {\n    text.innerText += 'Верно! Вот Ваши 20 золотых!';\n    updateHistory(text.innerText, 'lime');\n    gold += 20;\n    goldText.innerText = gold;\n  } else {\n    text.innerText += 'Не верно! Вы потеряли 10 здоровья';\n    updateHistory(text.innerText, 'red');\n    health -= 10;\n    healthText.innerText = health;\n    if (health <= 0) {\n      lose();\n    }\n  }\n}\n"],"names":["xp","health","gold","currentWeapon","fighting","monsterHealth","inventory","button1","button2","button3","text","xpText","healthText","goldText","monsterStats","monsterName","monsterHealthText","history","weapons","monsters","locations","goStore","goCave","fightDragon","buyHealth","buyWeapon","goTown","fightSlime","fightBeast","attack","dodge","easterEgg","restart","pickTwo","pickEight","updateHistory","color","update","location","newWeapon","sellWeapon","goFight","getMonsterAttackValue","isMonsterHit","lose","winGame","defeatMonster","level","hit","pick","guess","numbers","i"],"mappings":"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"}